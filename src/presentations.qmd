---
title: "Student Presentations"
params:
  csv_dir: csv
  data_csv_fn: "paper_ratings.csv"
  reimport: false
---

## About

This page documents the process of importing, cleaning, and visualizing the data about student presentation preferences.
The page then goes on to show how student presenters and discussants were assigned to readings by date and student preference.

## Set up

We load some critical packages.

```{r}
suppressPackageStartupMessages(library(ggplot2))
suppressPackageStartupMessages(library(dplyr))
suppressPackageStartupMessages(library(tidyr))
suppressPackageStartupMessages(library(googlesheets4))
```

## Acquire

We acquire the survey data from a Google sheet generated by the survey form, then save it as as CSV.

```{r}
#| label: import-data
#| message: false

if (params$reimport) {
  if (!dir.exists(params$csv_dir)) {
    message("Creating missing `include/csv/`.")
    dir.create(params$csv_dir)
  }
  
  options(gargle_oauth_email = Sys.getenv("GMAIL_SURVEY"))
  googledrive::drive_auth()
  
  student_ratings <- read_sheet(
    "https://docs.google.com/spreadsheets/d/17kvNbyOj1SYjyasxgpo6vDZce1sL4lwqqeAbRCWJJEE/edit?gid=526883845#gid=526883845"
  ) |>
    readr::write_csv(file.path(params$csv_dir, params$data_csv_fn))
}
```

## Clean

We reimport the saved CSV file and clean it.

```{r}
ratings <- readr::read_csv(file.path(params$csv_dir, params$data_csv_fn),
                                 show_col_types = FALSE)

names(ratings)
```

We want to capture the "raw" or full question name and the short variable name in a data dictionary.

```{r}
#| label: tbl-data-dictionary
#| tbl-cap: "A minimal data dictionary."
ratings_qs <- names(ratings)

ratings_clean <- ratings |>
  dplyr::rename(
    timestamp = "Timestamp",
    email = "Email Address",
    piaget_traj = "A: How robust is the evidence for Piaget's trajectories?",
    obj_perm = "B: When does object permanence emerge?",
    core_knowl =  "C. How does changing the task inform on the underlying construct(s) about physical knowledge?",
    rich_interp = "D: Rich interpretation of group differences in infant looking-time paradigms: How rich is dangerous? Necessary? Productive?",
    dev_disorders = "E: How do developmental disorders inform our understanding of cognitive development?",
    generalization = "F: The risks of generalization",
    connectionism = "G: A connectionist model to explain why infants seem so smart",
    a_not_b = "H: Emergentism and variants of the A-not-B task",
    gate_input = "I: Does development gate input to prevent a \"blooming, buzzing confusion?\"",
    ai_robotics = "J: How AI & robotics inform developmental science?",
    imitation = "K: Imitation in cultural learning",
    gesture = "L: Gesture",
    testimony = "M: Learning from testimony",
    naive_psy = "N: Naive psychology",
    poverty_bad = "O: Poverty is bad for cognition",
    poverty_adaptive = "P: Poverty can be adaptive for cognition"
  )

# Add a student index variable
ratings_clean <- ratings_clean |>
  mutate(student_i = 1:length(timestamp))

ratings_short <- names(ratings_clean)

# ratings_dd <- data.frame(qs = ratings_qs, 
#                                qs_short = ratings_short
#                                )
# 
# ratings_dd |>
#   knitr::kable(format = 'html')
# 
# readr::write_csv(ratings_dd,
#                  file = file.path(params$csv_dir,
#                                   "ratings-data-dict.csv"))
```

## Visualize

Let's look at ratings by topic to see if we have reasonable variation.

To do this, we need to incorporate the `rating_*` columns as row variables.

```{r}
ratings_long <- ratings_clean |>
  tidyr::pivot_longer(cols = c(3:18), names_to = "topic", values_to = "rating")
```


```{r}
#| label: fig-ratings-by-topic

ratings_long |>
  ggplot() +
  aes(x = rating) +
  geom_histogram() +
  facet_wrap(~ topic, nrow = 6, ncol = 3)
```


Let's also look to see if we have some variation by student.
We assign an anonymous code to each student first.

```{r}
ratings_long |>
  ggplot() +
  aes(x = rating) +
  geom_histogram() +
  facet_wrap(~ student_i, nrow = 6, ncol = 3)
```

## Assign

Let's work in order of the presentations, by date

### 2025-09-12

```{r}
#| label: tbl-piaget_traj-2025-09-12
ratings_long |>
  filter(topic == "piaget_traj", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
#| label: tbl-obj_perm-2025-09-12
ratings_long |>
  filter(topic == "obj_perm", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
presenters <- data.frame(email = NA, date = NA, topic = NA, present_discuss = NA)
presenters[1, 'email'] <- "ars7656@psu.edu"
presenters[1, 'date'] <- "2025-09-12"
presenters[1, 'topic'] <- "piaget_traj"
presenters[1, 'present_discuss'] <- "present"
presenters[2, 'email'] <- "jzh6650@psu.edu"
presenters[2, 'date'] <- "2025-09-12"
presenters[2, 'topic'] <- "piaget_traj"
presenters[2, 'present_discuss'] <- "discuss"

presenters[3, 'email'] <- "mml5964@psu.edu"
presenters[3, 'date'] <- "2025-09-12"
presenters[3, 'topic'] <- "obj_perm"
presenters[3, 'present_discuss'] <- "present"
presenters[4, 'email'] <- "gks5496@psu.edu"
presenters[4, 'date'] <- "2025-09-12"
presenters[4, 'topic'] <- "obj_perm"
presenters[4, 'present_discuss'] <- "discuss"

presenters
```

### 2025-09-26

```{r}
#| label: tbl-core_knowl-2025-09-26
ratings_long |>
  filter(topic == "core_knowl", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
#| label: tbl-rich_interp-2025-09-26
ratings_long |>
  filter(topic == "rich_interp", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```
```{r}
presenters[5, 'email'] <- "cfa5368@psu.edu"
presenters[5, 'date'] <- "2025-09-26"
presenters[5, 'topic'] <- "core_knowl"
presenters[5, 'present_discuss'] <- "present"
presenters[6, 'email'] <- "yqk5318@psu.edu"
presenters[6, 'date'] <- "2025-09-26"
presenters[6, 'topic'] <- "core_knowl"
presenters[6, 'present_discuss'] <- "discuss"

presenters[7, 'email'] <- "zps5262@psu.edu"
presenters[7, 'date'] <- "2025-09-26"
presenters[7, 'topic'] <- "rich_interp"
presenters[7, 'present_discuss'] <- "present"
presenters[8, 'email'] <- "mml5964@psu.edu"
presenters[8, 'date'] <- "2025-09-26"
presenters[8, 'topic'] <- "rich_interp"
presenters[8, 'present_discuss'] <- "discuss"

presenters |>
  arrange(email, date, present_discuss) |>
  knitr::kable(format = 'html')
```

### 2025-10-05

```{r}
#| label: tbl-dev_disorders-2025-10-05
ratings_long |>
  filter(topic == "dev_disorders", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```


```{r}
#| label: tbl-generalization-2025-10-05
ratings_long |>
  filter(topic == "generalization", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

Let's see who does not yet have an assignment.

```{r}
presenters_assigned <- presenters$email |> 
  unique()
all_students <- ratings_long$email |>
  unique()

not_assigned <- !(all_students %in% presenters_assigned)
all_students[not_assigned]
```

```{r}
presenters[9, 'email'] <- "kab7845@psu.edu"
presenters[9, 'date'] <- "2025-10-05"
presenters[9, 'topic'] <- "dev_disorders"
presenters[9, 'present_discuss'] <- "present"
presenters[10, 'email'] <- "pxs5614@psu.edu"
presenters[10, 'date'] <- "2025-10-05"
presenters[10, 'topic'] <- "dev_disorders"
presenters[10, 'present_discuss'] <- "discuss"

presenters[11, 'email'] <- "cfa5368@psu.edu"
presenters[11, 'date'] <- "2025-10-05"
presenters[11, 'topic'] <- "generalization"
presenters[11, 'present_discuss'] <- "discuss"
presenters[12, 'email'] <- "opb5142@psu.edu"
presenters[12, 'date'] <- "2025-10-05"
presenters[12, 'topic'] <- "generalization"
presenters[12, 'present_discuss'] <- "present"

presenters |>
  arrange(email, date, present_discuss) |>
  knitr::kable(format = 'html')
```

### 2025-10-24

```{r}
presenters_assigned <- presenters$email |> 
  unique()
all_students <- ratings_long$email |>
  unique()

not_assigned <- !(all_students %in% presenters_assigned)
all_students[not_assigned]
```

```{r}
#| label: tbl-connectionism-2025-10-24
ratings_long |>
  filter(topic == "connectionism", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
#| label: tbl-a_not_b-2025-10-24
ratings_long |>
  filter(topic == "a_not_b", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
presenters[13, 'email'] <- "gks5496@psu.edu"
presenters[13, 'date'] <- "2025-10-24"
presenters[13, 'topic'] <- "connectionism"
presenters[13, 'present_discuss'] <- "present"
presenters[14, 'email'] <- "ckl5780@psu.edu"
presenters[14, 'date'] <- "2025-10-24"
presenters[14, 'topic'] <- "connectionism"
presenters[14, 'present_discuss'] <- "discuss"

presenters[15, 'email'] <- "nsb5522@psu.edu"
presenters[15, 'date'] <- "2025-10-24"
presenters[15, 'topic'] <- "a_not_b"
presenters[15, 'present_discuss'] <- "present"
presenters[16, 'email'] <- "zps5262@psu.edu"
presenters[16, 'date'] <- "2025-10-24"
presenters[16, 'topic'] <- "a_not_b"
presenters[16, 'present_discuss'] <- "discuss"

presenters |>
  arrange(email, date, present_discuss) |>
  knitr::kable(format = 'html')
  
```

### 2025-10-31

```{r}
presenters_assigned <- presenters$email |> 
  unique()
all_students <- ratings_long$email |>
  unique()

not_assigned <- !(all_students %in% presenters_assigned)
all_students[not_assigned]
```

```{r}
#| label: tbl-gate_input-2025-10-31
ratings_long |>
  filter(topic == "gate_input", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
#| label: tbl-ai_robotics-2025-10-31
ratings_long |>
  filter(topic == "ai_robotics", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
presenters[17, 'email'] <- "lxd5406@psu.edu"
presenters[17, 'date'] <- "2025-10-31"
presenters[17, 'topic'] <- "gate_input"
presenters[17, 'present_discuss'] <- "present"
presenters[18, 'email'] <- "ars7656@psu.edu"
presenters[18, 'date'] <- "2025-10-31"
presenters[18, 'topic'] <- "gate_input"
presenters[18, 'present_discuss'] <- "discuss"

presenters[19, 'email'] <- "pxs5614@psu.edu"
presenters[19, 'date'] <- "2025-10-31"
presenters[19, 'topic'] <- "ai_robotics"
presenters[19, 'present_discuss'] <- "present"
presenters[20, 'email'] <- "lfh5527@psu.edu"
presenters[20, 'date'] <- "2025-10-31"
presenters[20, 'topic'] <- "ai_robotics"
presenters[20, 'present_discuss'] <- "discuss"

presenters |>
  arrange(email, date, present_discuss) |>
  knitr::kable(format = 'html')
  
```

### 2025-11-14

```{r}
presenters_assigned <- presenters$email |> 
  unique()
all_students <- ratings_long$email |>
  unique()

not_assigned <- !(all_students %in% presenters_assigned)
all_students[not_assigned]
```

```{r}
#| label: tbl-imitation-2025-11-14
ratings_long |>
  filter(topic == "imitation", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
#| label: tbl-gesture-2025-11-14
ratings_long |>
  filter(topic == "gesture", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
presenters[21, 'email'] <- "lfh5527@psu.edu"
presenters[21, 'date'] <- "2025-11-14"
presenters[21, 'topic'] <- "imitation"
presenters[21, 'present_discuss'] <- "present"
presenters[22, 'email'] <- "eoa5294@psu.edu"
presenters[22, 'date'] <- "2025-11-14"
presenters[22, 'topic'] <- "imitation"
presenters[22, 'present_discuss'] <- "discuss"

presenters[23, 'email'] <- "jzh6650@psu.edu"
presenters[23, 'date'] <- "2025-11-14"
presenters[23, 'topic'] <- "gesture"
presenters[23, 'present_discuss'] <- "present"
presenters[24, 'email'] <- "kab7845@psu.edu"
presenters[24, 'date'] <- "2025-11-14"
presenters[24, 'topic'] <- "gesture"
presenters[24, 'present_discuss'] <- "discuss"

presenters |>
  arrange(email, date, present_discuss) |>
  knitr::kable(format = 'html')
```

### 2025-11-21

```{r}
presenters_assigned <- presenters$email |> 
  unique()
all_students <- ratings_long$email |>
  unique()

not_assigned <- !(all_students %in% presenters_assigned)
all_students[not_assigned]
```

```{r}
#| label: tbl-testimony-2025-11-21
ratings_long |>
  filter(topic == "testimony", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
presenters[25, 'email'] <- "eoa5294@psu.edu"
presenters[25, 'date'] <- "2025-11-21"
presenters[25, 'topic'] <- "testimony"
presenters[25, 'present_discuss'] <- "present"
presenters[26, 'email'] <- "lxd5406@psu.edu"
presenters[26, 'date'] <- "2025-11-21"
presenters[26, 'topic'] <- "testimony"
presenters[26, 'present_discuss'] <- "discuss"

presenters |>
  arrange(email, date, present_discuss) |>
  knitr::kable(format = 'html')
```

### 2025-12-05

```{r}
presenters |>
  group_by(email) |>
  summarize(n_sched = n()) |>
  filter(n_sched < 2) |>
  knitr::kable(format = 'html')  
```

```{r}
presenters_assigned <- presenters$email |>
  unique()
all_students <- ratings_long$email |>
  unique()

not_assigned <- !(all_students %in% presenters_assigned)
all_students[not_assigned]
```

```{r}
#| label: tbl-naive_psy-2025-12-05
ratings_long |>
  filter(topic == "naive_psy", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
presenters[27, 'email'] <- "TBD"
presenters[27, 'date'] <- "2025-12-05"
presenters[27, 'topic'] <- "naive_psy"
presenters[27, 'present_discuss'] <- "present"
presenters[28, 'email'] <- "TBD"
presenters[28, 'date'] <- "2025-12-05"
presenters[28, 'topic'] <- "naive_psy"
presenters[28, 'present_discuss'] <- "discuss"

presenters |>
  arrange(email, date, present_discuss) |>
  knitr::kable(format = 'html')
```

### 2025-12-12

```{r}
#| label: tbl-poverty_bad_psy-2025-12-12
ratings_long |>
  filter(topic == "poverty_bad", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```


```{r}
#| label: tbl-poverty_adaptive-2025-12-12
ratings_long |>
  filter(topic == "poverty_adaptive", rating >= 3) |>
  arrange(timestamp) |>
  knitr::kable(format = 'html')
```

```{r}
presenters[29, 'email'] <- "yqk5318@psu.edu"
presenters[29, 'date'] <- "2025-12-12"
presenters[29, 'topic'] <- "poverty_bad"
presenters[29, 'present_discuss'] <- "present"
presenters[30, 'email'] <- "opb5142@psu.edu"
presenters[30, 'date'] <- "2025-12-12"
presenters[30, 'topic'] <- "poverty_bad"
presenters[30, 'present_discuss'] <- "discuss"

presenters[31, 'email'] <- "ckl5780@psu.edu"
presenters[31, 'date'] <- "2025-12-12"
presenters[31, 'topic'] <- "poverty_bad"
presenters[31, 'present_discuss'] <- "present"
presenters[32, 'email'] <- "nsb5522@psu.edu"
presenters[32, 'date'] <- "2025-12-12"
presenters[32, 'topic'] <- "poverty_bad"
presenters[32, 'present_discuss'] <- "discuss"

presenters |>
  arrange(email, date, present_discuss) |>
  knitr::kable(format = 'html')
```

### QA check

```{r}
presenters |>
  group_by(email) |>
  summarize(n_sched = n()) |>
  filter(n_sched < 2) |>
  knitr::kable(format = 'html')  
```
